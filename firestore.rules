rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Deny ALL
    match /{document=**} {
      allow read: if false;
      allow write: if false;
    }

    // Collection based:
    // contributors
    match /contributors/{docId} {
      allow read: if request.auth.uid != null;
    }

    // entries
    match /entries/{docId} {
      allow read;
      allow write: if request.auth.uid != null;
    }

    // flags
    match /flags/{docId} {
      allow write: if request.auth.uid != null;
    }

    // places
    match /places/{docId} {
      allow read;
      allow write: if request.auth.uid != null;
    }

    // texts
    match /texts/{docId} {
      allow read;
    }
  }
}
